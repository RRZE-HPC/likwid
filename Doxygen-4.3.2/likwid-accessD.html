<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>LIKWID: &lt;CODE&gt;likwid-accessD&lt;/CODE&gt;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LIKWID
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title"><code>likwid-accessD</code> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Information</h1>
<p><code>likwid-accessD</code> is a command line application that opens a UNIX file socket and waits for access operations from LIKWID tools that require access to the MSR and PCI device files. The MSR and PCI device files are commonly only accessible for users with root privileges, therefore <code>likwid-accessD</code> requires the suid-bit set or a suitable libcap setting. Depending on the current system architecture, <code>likwid-accessD</code> permits only access to registers defined for the architecture.</p>
<h1>Build</h1>
<p>The building of <code>likwid-accessD</code> can be controlled through the <code>config.mk</code> file. Depending on the variable <code>BUILDDAEMON</code> the daemon code is built or not. The path to <code>likwid-accessD</code> is compiled into the LIKWID library, so if you want to use the access daemon from an uncommon path, you have to set the <code>ACCESSDAEMON</code> variable.</p>
<h1>Setup</h1>
<p>In order to allow <code>likwid-accessD</code> to run with elevated priviledges, there are three ways </p><ul>
<li>
SUID Method:<br />
 <code> root: # chown root:root likwid-accessD<br />
 root: # chmod u+s likwid-accessD<br />
 </code>  </li>
<li>
GUID Method: (PCI devices cannot be accesses with this method but we are working on it)<br />
 <code> root: # groupadd likwid<br />
 root: # chown root:likwid likwid-accessD<br />
 root: # chmod g+s likwid-accessD<br />
 </code>  </li>
<li>
Libcap Method:<br />
 <code> root: # setcap cap_sys_rawio+ep likwid-accessD </code>  </li>
</ul>
<p>There are Linux distributions where settings the suid permission on <code>likwid-accessD</code> is not enough. Try also to set the capabilities for <code>likwid-accessD</code>.</p>
<h1>Protocol</h1>
<p>Every likwid instance will start its own daemon. This client-server pair will communicate with a socket file in <code>/tmp</code> named <code>likwid-$PID</code>. The daemon only accepts one connection. As soon as the connect is successful the socket file will be deleted.</p>
<p>From there the communication consists of write read pairs issued from the client. The daemon will ensure allowed register ranges relevant for the likwid applications. Other register access will be silently dropped and logged to <code>syslog</code>.</p>
<p>On shutdown the client will terminate the daemon with a exit message.</p>
<p>The daemon has the following error handling: </p><ul>
<li>
To prevent daemons not stopped correctly the daemon has a timeout on startup. </li>
<li>
If the client prematurely disconnects the daemon terminates. </li>
<li>
If the client disconnects between a read and write the daemon catches <code>SIGPIPE</code> and disconnects. </li>
</ul>
<p>*/ </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Apr 19 2018 10:48:47 for LIKWID by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
