




check-event-files:
    stage: test
    tags:
      - testcluster
    script:
      - module load python
      - test/check_data_files.py events
#      - test/check_data_files.py groups

generator:
  stage: build
  tags:
    - testcluster
  variables:
    NO_SLURM_SUBMIT: 1
  script: 
   - test/generate_ci_jobs.sh > generated-pipeline.yml
  artifacts:
    paths:
      - generated-pipeline.yml

testcluster-pipeline:
  stage: test
  trigger:
    include:
      - artifact: generated-pipeline.yml
        job: generator
    strategy: depend

