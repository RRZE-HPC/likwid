<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>LIKWID: &lt;CODE&gt;likwid-bench&lt;/CODE&gt;</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">LIKWID
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title"><code>likwid-bench</code> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Information</h1>
<p><code>likwid-bench</code> is a benchmark suite for low-level (assembly) benchmarks to measure bandwidths and instruction throughput for specific instruction code on x86 systems. The currently included benchmark codes include common data access patterns like load and store but also calculations like vector triad and sum. <code>likwid-bench</code> includes architecture specific benchmarks for x86, x86_64 and x86 for Intel Xeon Phi coprocessors. The performance values can either be calculated by <code>likwid-bench</code> or measured using hardware performance counters by using <a class="el" href="likwid-perfctr.html"><code>likwid-perfctr</code></a> as a wrapper to <code>likwid-bench</code>. This requires to build <code>likwid-bench</code> with instrumentation enabled in config.mk (<code>INSTRUMENT_BENCH</code>).</p>
<h1>Options</h1>
<table class="doxtable">
<tr>
<th>Option </th><th>Description  </th></tr>
<tr>
<td>-h </td><td>Print help message  </td></tr>
<tr>
<td>-a </td><td>List all available benchmarks  </td></tr>
<tr>
<td>-p </td><td>List all available thread affinity domains  </td></tr>
<tr>
<td>-d &lt;delim&gt; </td><td>Use &lt;delim&gt; instead of ',' for the output of -p  </td></tr>
<tr>
<td>-l &lt;test&gt; </td><td>List characteristics of &lt;test&gt; like number of streams, data used per loop iteration, ...  </td></tr>
<tr>
<td>-t &lt;test&gt; </td><td>Perform assembly benchmark &lt;test&gt;  </td></tr>
<tr>
<td>-s &lt;min_time&gt; </td><td>Minimal time in seconds to run the benchmark.<br/>
Using this time, the iteration count is determined automatically to provide reliable results. Default is 1. If the determined iteration count is below 10, it is normalized to 10.  </td></tr>
<tr>
<td>-w &lt;workgroup&gt; </td><td>Set a workgroup for the benchmark. A workgroup can have different formats:<br/>
 <table class="doxtable">
<tr>
<th>Format </th><th>Description  </th></tr>
<tr>
<td>&lt;affinity_domain&gt;:&lt;size&gt; </td><td>Allocate in total &lt;size&gt; in affinity domain &lt;affinity_domain&gt;.<br/>
<code>likwid-bench</code> starts as many threads as available in affinity domain &lt;affinity_domain&gt;  </td></tr>
<tr>
<td>&lt;affinity_domain&gt;:&lt;size&gt;:&lt;num_threads&gt; </td><td>Allocate in total &lt;size&gt; in affinity domain &lt;affinity_domain&gt;.<br/>
<code>likwid-bench</code> starts &lt;num_threads&gt; in affinity domain &lt;affinity_domain&gt;  </td></tr>
<tr>
<td>&lt;affinity_domain&gt;:&lt;size&gt;:&lt;num_threads&gt;:&lt;chunk_size&gt;:&lt;stride&gt; </td><td>Allocate in total &lt;size&gt; in affinity domain &lt;affinity_domain&gt;.<br/>
<code>likwid-bench</code> starts &lt;num_threads&gt; in affinity domain &lt;affinity_domain&gt; with &lt;chunk_size&gt; selected in row and a distance of &lt;stride&gt;.<br/>
See <a class="el" href="likwid-pin.html#CPU_expressions">CPU_expressions</a> on the <a class="el" href="likwid-pin.html"><code>likwid-pin</code></a> page for further information.  </td></tr>
<tr>
<td>&lt;above_formats&gt;-&lt;streamID&gt;:&lt;stream_domain&gt; </td><td>In combination with every above mentioned format, the test streams (arrays, vectors) can be place in different affinity domains than the threads.<br/>
This can be achieved by adding a stream placement option -&lt;streamID&gt;:&lt;stream_domain&gt; for all streams of the test to the workgroup definition.<br/>
The stream with &lt;streamID&gt; is placed in affinity domain &lt;stream_domain&gt;.<br/>
The amount of streams of a test can be determined with the -l &lt;test&gt; commandline option.   </td></tr>
</table>
</td></tr>
</table>
<h1>Examples</h1>
<ul>
<li>
<code>likwid-bench -t copy -w S0:100kB</code><br/>
 Run test <code>copy</code> using all threads in affinity domain <code>S0</code>. The input and output stream of the <code>copy</code> benchmark sum up to <code>100kB</code> placed in affinity domain <code>S0</code>. The iteration count is calculated automatically.  </li>
<li>
<code>likwid-bench -t triad -i 100 -w S0:1GB:2:1:2</code><br/>
 Run test <code>triad</code> using <code>2</code> threads in affinity domain <code>S0</code>. Assuming <code>S0 = 0,4,1,5</code> the threads are pinned to CPUs 0 and 1, hence skipping of one thread during selection. The streams of the <code>triad</code> benchmark sum up to <code>1GB</code> placed in affinity domain <code>S0</code>. The number of iteration is explicitly set to <code>100</code>  </li>
<li>
<code>likwid-bench -t update -w S0:100kB -w S1:100kB</code><br/>
 Run test <code>update</code> using all threads in affinity domain <code>S0</code> and <code>S1</code>. The threads scheduled on <code>S0</code> use stream that sum up to <code>100kB</code>. Similar to <code>S1</code> the threads are placed there working only on their socket-local streams. The results of both workgroups are combined.  </li>
<li>
<code>likwid-perfctr -c E:S0:4 -g MEM -m likwid-bench -t update -w S0:100kB:4</code><br/>
 Run test <code>update</code> using <code>4</code> threads in affinity domain <code>S0</code>. The input and output stream of the <code>copy</code> benchmark sum up to <code>100kB</code> placed in affinity domain <code>S0</code>. The benchmark execution is measured using the <a class="el" href="likwid-perfctr.html#Marker_API">Marker_API</a>. It measures the <code>MEM</code> performance group on the first four CPUs of the <code>S0</code> affinity domain. For further information about hardware performance counters see <a class="el" href="likwid-perfctr.html"><code>likwid-perfctr</code></a><br/>
<b>Note:</b> Currently it is not possible to pin the threads already at <code>likwid-perfctr</code>. The pinning is done by <code>likwid-bench</code>  </li>
<li>
<code>likwid-bench -t copy -w S0:1GB:2:1:2-0:S1,1:S1</code><br/>
 Run test <code>copy</code> using <code>2</code> threads in affinity domain <code>S0</code> skipping one thread during selection. The two streams used in the <code>copy</code> benchmark have the IDs 0 and 1 and a summed up size of <code>1GB</code>. Both streams are placed in affinity domain <code>S1</code>.  </li>
</ul>
</div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Thu Nov 5 2015 10:35:53 for LIKWID by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
